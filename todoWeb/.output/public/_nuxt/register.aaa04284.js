import{s as r,a as N}from"./function-call.3337e31e.js";import{s as I}from"./index.0200a354.js";import{h as v,s as U}from"./index.71b9cbcb.js";import"./index.092e994c.js";import{r as n,a as R,l as S,q as u,s as g,m,k as $,z as c,A as f,v as C,x as E,y as F}from"./entry.846cef3d.js";import{_ as P}from"./_plugin-vue_export-helper.c27b6911.js";const q=""+new URL("registerBg.a8cd1b31.png",import.meta.url).href;const h=d=>(E("data-v-cfbcf0aa"),d=d(),F(),d),z={class:"container"},A=h(()=>m("header",null,[m("img",{src:q})],-1)),L=h(()=>m("h2",null,"注册 Register",-1)),T={class:"btnBox"},j={__name:"register",setup(d){const e=n(""),s=n(""),w=R(),y=async()=>{k()||(e.value&&s.value?v.post("/user/create",{username:e.value,password:s.value}).then(t=>{t.error===0?(r({type:"success",message:"注册成功",duration:1e3}),w.push("login")):r({type:"warning",message:"注册失败",duration:1e3})}).catch(t=>{console.log(t)}):e.value===""?r({type:"warning",message:"用户名不能为空",duration:1e3}):s.value===""&&r({type:"warning",message:"密码不能为空",duration:1e3}))},i=n(!1),p=n("请输入用户名"),V=()=>{i.value=!1,p.value="请输入用户名"},b=async()=>{e.value&&(await v.post(`/user/check/${e.value}`,{username:e.value,password:s.value})==1?(e.value="",i.value=!0,p.value="用户名已存在，请重新输入"):(i.value=!1,p.value="请输入用户名"))},o=n(""),k=()=>{if(s.value!==o.value)return r({type:"warning",message:"两次密码输入不一样",duration:1e3}),s.value="",o.value="",!1};return(t,a)=>{const _=N,x=I,B=U;return $(),S("div",z,[A,L,u(x,{inset:""},{default:g(()=>[u(_,{onBlur:b,onFocus:V,modelValue:c(e),"onUpdate:modelValue":a[0]||(a[0]=l=>f(e)?e.value=l:null),placeholder:c(p),error:c(i)},null,8,["modelValue","placeholder","error"]),u(_,{type:"password",modelValue:c(s),"onUpdate:modelValue":a[1]||(a[1]=l=>f(s)?s.value=l:null),placeholder:"请输入密码"},null,8,["modelValue"]),u(_,{type:"password",modelValue:c(o),"onUpdate:modelValue":a[2]||(a[2]=l=>f(o)?o.value=l:null),placeholder:"请确认密码"},null,8,["modelValue"])]),_:1}),m("div",T,[u(B,{type:"primary",block:"",plain:"",hairline:"",onClick:y},{default:g(()=>[C("注册")]),_:1})])])}}},O=P(j,[["__scopeId","data-v-cfbcf0aa"]]);export{O as default};
