import{s as h,a as D}from"./function-call.3337e31e.js";import{t as R,s as q,a as E,b as A,_ as G}from"./util.a31f0905.js";import{h as w,s as M}from"./index.71b9cbcb.js";import"./index.092e994c.js";import{d as T,a as j,M as F,r as l,k as H,l as J,q as o,z as m,A as _,s as d,m as v,v as C,x as K,y as L}from"./entry.846cef3d.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";const g=f=>(K("data-v-ce514264"),f=f(),L(),f),P=g(()=>v("div",{class:"header"},[v("img",{src:G,alt:""})],-1)),Q=g(()=>v("span",{class:"state",style:{background:"#ea4335"}},"紧急",-1)),W=g(()=>v("span",{class:"state",style:{background:"#fbbc23"}},"星标",-1)),X={class:"btnBox"},Y=T({__name:"todoDetails",setup(f){const y=j(),S=F(),n=l(S.query),u=l([]);n.value.urgentState==1&&u.value.push("urgent"),n.value.starState==1&&u.value.push("star");const r=l(!1),z=s=>{i.value=R(s),r.value=!1},i=l(n.value.time),c=l(n.value.title),p=l(n.value.content),k=l(0),x=l(0),U=()=>{u.value.forEach(s=>{s==="urgent"?k.value=1:s==="star"&&(x.value=1)})},$=async()=>{if(U(),c.value){const s={id:n.value.id,title:c.value,content:p.value?p.value:"无描述",time:i.value,urgentState:k.value,starState:x.value};let e="/todolist/update";w.post(e,s).then(t=>{t.error===0&&(h({type:"success",message:"更新成功",duration:1e3}),y.push("list"))}).catch(t=>{h({type:"warning",message:t,duration:600})})}else h({type:"warning",message:"标题不能为空",duration:600})},B=async s=>{let e="/todolist/delete/"+n.value.id;w.remove(e).then(t=>{y.push("list")}).catch(t=>{h({type:"warning",message:t,duration:600})})};return(s,e)=>{const t=D,b=q,I=E,N=A,V=M;return H(),J("div",null,[P,o(t,{type:"text",modelValue:m(c),"onUpdate:modelValue":e[0]||(e[0]=a=>_(c)?c.value=a:null),autosize:"",placeholder:"请输入标题"},null,8,["modelValue"]),o(t,{rows:"5",autosize:"",type:"textarea",placeholder:"请输入详情",modelValue:m(p),"onUpdate:modelValue":e[1]||(e[1]=a=>_(p)?p.value=a:null)},null,8,["modelValue"]),o(t,{name:"checkboxGroup"},{input:d(()=>[o(I,{modelValue:m(u),"onUpdate:modelValue":e[2]||(e[2]=a=>_(u)?u.value=a:null),direction:"horizontal"},{default:d(()=>[o(b,{name:"urgent","checked-color":"#e94235","icon-size":"20px"},{default:d(()=>[Q]),_:1}),o(b,{name:"star","checked-color":"#fabb22","icon-size":"20px"},{default:d(()=>[W]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(t,{modelValue:m(i),"onUpdate:modelValue":e[3]||(e[3]=a=>_(i)?i.value=a:null),"is-link":"",readonly:"",name:"calendar",placeholder:"点击选择日期",onClick:e[4]||(e[4]=a=>r.value=!0)},null,8,["modelValue"]),o(N,{show:m(r),"onUpdate:show":e[5]||(e[5]=a=>_(r)?r.value=a:null),onConfirm:z},null,8,["show"]),v("div",X,[o(V,{type:"primary",block:"",onClick:$},{default:d(()=>[C("提交修改")]),_:1}),o(V,{type:"danger",plain:"",block:"",onClick:B,style:{"margin-top":"20px"}},{default:d(()=>[C("不想做了")]),_:1})])])}}});const le=O(Y,[["__scopeId","data-v-ce514264"]]);export{le as default};
